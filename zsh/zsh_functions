# Fucntion for activating an python virtual environment
workon(){ source ~/virtualenvs/$1/bin/activate; }

# Function for downloading one file from git
# First argument is user/repo and second is the file path
git_get(){ wget https://github.com/$1/raw/master/$2; }

# Function for activating ssh-agent
ssh_agent(){ eval `ssh-agent`; ssh-add; }

# Kill all processes with specific name
kill_proc (){ pids=$(ps -C $1 | grep $1 | cut -d " " -f 2);
	lines=$(echo $pids | wc -l)
	for i in `seq $lines`; do kill $(echo $pids | cut -d$'\n' -f$i); done
}

# print ram usage of a process in MB
ram_usage (){ 
	ram_kb=$(ps -p $1 -o rss | awk 'NR==2');
	ram_mb=$(echo "scale=2;$ram_kb/1000" | bc -l);
	echo "$ram_mb MB"
}

# Profile a process in terminal for n seconds
profile_process (){
	sh -c "exec $(echo $1);" &
	pid=$(echo $!)

	end_time=$((SECONDS+$2))
	while [ $SECONDS -lt $end_time ]; 
	do
		ram_usage $pid;
		sleep 1;
	done
}
